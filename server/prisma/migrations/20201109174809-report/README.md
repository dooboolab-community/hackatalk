# Migration `20201109174809-report`

This migration has been generated by hyochan at 11/10/2020, 2:48:09 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "hackatalk"."Report" (
"report" text   NOT NULL ,
"createdAt" timestamp(3)   DEFAULT CURRENT_TIMESTAMP,
"updatedAt" timestamp(3)   DEFAULT CURRENT_TIMESTAMP,
"deletedAt" timestamp(3)   ,
"userId" text   NOT NULL ,
"reportedUserId" text   NOT NULL ,
PRIMARY KEY ("userId","reportedUserId")
)

ALTER TABLE "hackatalk"."Report" ADD FOREIGN KEY("userId")REFERENCES "hackatalk"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "hackatalk"."Report" ADD FOREIGN KEY("reportedUserId")REFERENCES "hackatalk"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201109131631-blocked-users..20201109174809-report
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 enum Gender {
   male
@@ -42,8 +42,9 @@
   notifications          Notification[]          @relation("Notification")
   friends                Friend[]                @relation("Friend")
   memberships            Membership[]            @relation("Membership")
   blockedUsers           BlockedUser[]           @relation("BlockedUser")
+  reports                Report[]                @relation("Report")
 }
 model Notification {
   id                     Int                     @default(autoincrement()) @id
@@ -89,8 +90,22 @@
   @@id([userId, blockedUserId])
 }
+model Report {
+  report                 String
+  createdAt              DateTime?               @default(now())
+  updatedAt              DateTime?               @default(now()) @updatedAt
+  deletedAt              DateTime?
+
+  userId                 String
+  user                   User                    @relation(fields: [userId], references: [id])
+  reportedUserId         String
+  reportedUser           User                    @relation(name: "Report", fields: [reportedUserId], references: [id])
+
+  @@id([userId, reportedUserId])
+}
+
 enum MembershipType {
   owner
   admin
   member
```


